<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>BG Tech | CFO Dashboard</title>
  
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@500;600;700;800;900&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
</head>
<body>

  <div id="login-screen" class="login-wrapper">
    <div class="bg-grid"></div><div class="bg-glow-1 login-glow"></div>
    <div class="glass-card login-box">
      <div class="logo-header">
        <i data-lucide="cpu" color="#0ea5e9" style="width:40px; height:40px;"></i>
        <h1 class="font-title">BG <span>TECH</span></h1>
      </div>
      <div class="login-badge">ACESSO RESTRITO CFO</div>
      
      <div class="input-wrapper">
        <input type="text" id="login-user" class="input-field" placeholder="Identificação">
      </div>
      <div class="input-wrapper" style="margin-bottom: 40px;">
        <input type="password" id="login-pass" class="input-field" placeholder="Senha do Cofre">
      </div>
      
      <button class="btn-action w-full" onclick="app.login()">
        Destrancar Núcleo <i data-lucide="unlock" style="width:18px;"></i>
      </button>
    </div>
  </div>

  <div class="app-container" id="main-app" style="display: none;">
    <div class="bg-grid"></div><div class="bg-glow-1"></div><div class="bg-glow-2"></div>

    <aside class="sidebar">
      <div class="logo-container">
        <i data-lucide="cpu" color="#0ea5e9" style="width:28px; height:28px;"></i>
        <h1 class="font-title">BG <span>TECH</span></h1>
      </div>
      
      <nav class="nav-menu">
        <button class="nav-btn active" onclick="app.setTab('overview')"><i data-lucide="layout-dashboard"></i> Inteligência Geral</button>
        <button class="nav-btn" onclick="app.setTab('fixos')"><i data-lucide="anchor"></i> Estrutura Fixa</button>
        <button class="nav-btn" onclick="app.setTab('unicos')"><i data-lucide="zap"></i> Gastos Variáveis</button>
      </nav>

      <div class="sync-status">
        <div class="sync-dot" id="sync-indicator"></div> <span id="sync-text">Conectado à Nuvem</span>
      </div>
    </aside>

    <main class="main-content">
      <header class="top-header">
        <div>
          <h2 class="font-title" id="page-title">Resumo Financeiro</h2>
          <p class="text-subtitle">Monitoramento de despesas operacionais da base.</p>
        </div>
        <div class="header-actions">
          <div class="filters-box">
            <select id="filter-month" class="filter-select" onchange="app.render()"></select>
            <div class="divider"></div>
            <select id="filter-year" class="filter-select" onchange="app.render()">
              <option value="2025">2025</option><option value="2026" selected>2026</option>
            </select>
          </div>
          <button class="btn-action" onclick="app.openDrawer()"><i data-lucide="plus"></i> Adicionar</button>
        </div>
      </header>

      <div id="view-overview">
        <div class="stats-grid">
          <div class="glass-card stat-danger">
            <div class="stat-header"><span>Sangria Total (Mês)</span><i data-lucide="trending-down" color="#ef4444"></i></div>
            <h2 class="font-title stat-number" id="val-total">R$ 0,00</h2>
          </div>
          <div class="glass-card stat-primary">
            <div class="stat-header"><span>Custo Operacional Fixo</span><i data-lucide="anchor" color="#0ea5e9"></i></div>
            <h2 class="font-title stat-number" id="val-fixos">R$ 0,00</h2>
          </div>
          <div class="glass-card stat-warning">
            <div class="stat-header"><span>Imprevistos e Variáveis</span><i data-lucide="zap" color="#f59e0b"></i></div>
            <h2 class="font-title stat-number" id="val-unicos">R$ 0,00</h2>
          </div>
        </div>

        <div class="charts-grid">
          <div class="glass-card chart-box">
            <h3 class="font-title chart-title">Curva de Sangria (6 Meses)</h3>
            <div id="chart-area" class="chart-container"></div>
          </div>
          <div class="glass-card chart-box">
            <h3 class="font-title chart-title">Distribuição Fixa</h3>
            <div id="chart-donut" class="chart-container donut-center"></div>
          </div>
        </div>
      </div>

      <div id="view-list" style="display: none;">
        <div class="glass-card p-0 overflow-hidden">
          <table class="data-table">
            <thead>
              <tr><th>Data</th><th>Descrição do Lançamento</th><th>Categoria</th><th>Status</th><th class="text-right">Valor</th><th class="text-center">Gestão</th></tr>
            </thead>
            <tbody id="table-body"></tbody>
          </table>
          <div id="empty-table" class="empty-state">
            <i data-lucide="check-circle"></i>
            <h3>Nenhum registro encontrado.</h3>
          </div>
        </div>
      </div>
    </main>

    <nav class="mobile-nav">
      <button class="m-nav-btn active" onclick="app.setTab('overview')"><i data-lucide="layout-dashboard"></i> Visão</button>
      <button class="m-nav-btn" onclick="app.setTab('fixos')"><i data-lucide="anchor"></i> Fixos</button>
      <button class="m-nav-btn" onclick="app.setTab('unicos')"><i data-lucide="zap"></i> Variáveis</button>
    </nav>

    <div class="drawer-overlay" id="drawer-overlay" onclick="app.closeDrawer()"></div>
    <div class="drawer" id="drawer">
      <div class="drawer-header">
        <h2 class="font-title" id="drawer-title">Novo Registro</h2>
        <button class="btn-close" onclick="app.closeDrawer()"><i data-lucide="x"></i></button>
      </div>

      <input type="hidden" id="form-id">
      
      <div class="type-switcher">
        <button class="type-btn active" id="btn-t-fixos" onclick="app.setFormType('fixos')">Custo Fixo Base</button>
        <button class="type-btn" id="btn-t-unicos" onclick="app.setFormType('unicos')">Custo Variável</button>
      </div>

      <div class="input-wrapper">
        <label class="input-label">O que está sendo pago? *</label>
        <input type="text" id="form-nome" class="input-field" placeholder="Ex: Assinatura AWS, Escritório...">
      </div>

      <div class="form-grid-2">
        <div class="input-wrapper">
          <label class="input-label">Valor (R$) *</label>
          <input type="text" id="form-valor" class="input-field input-money" placeholder="0,00" oninput="app.maskCurrency(event)">
        </div>
        <div class="input-wrapper">
          <label class="input-label">Data Limite</label>
          <input type="date" id="form-data" class="input-field">
        </div>
      </div>

      <div class="input-wrapper">
        <label class="input-label">Categoria Estratégica</label>
        <select id="form-categoria" class="input-field cursor-pointer"></select>
      </div>

      <div class="input-wrapper">
        <label class="input-label">Status do Pagamento</label>
        <select id="form-status" class="input-field cursor-pointer">
          <option value="Pago">✔️ Já Descontou (Pago)</option>
          <option value="Pendente">⏳ A Pagar (Agendado)</option>
        </select>
      </div>

      <div class="input-wrapper">
        <label class="input-label">Anotação (Opcional)</label>
        <input type="text" id="form-desc" class="input-field" placeholder="Detalhes, motivo da despesa...">
      </div>

      <button class="btn-action w-full mt-4 p-lg" onclick="app.saveData()">
        Registrar no Sistema <i data-lucide="check-circle-2"></i>
      </button>
    </div>
  </div>

  <div id="toast-container"></div>

  <script src="app.js"></script>
</body>
</html>
